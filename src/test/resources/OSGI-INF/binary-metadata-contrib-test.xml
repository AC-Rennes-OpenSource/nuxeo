<component name="org.nuxeo.binary.metadata.contrib.test">

  <extension target="org.nuxeo.binary.metadata.api.service"
             point="metadataMappings">
    <metadataMapping id="File" processor="exifTool" blobXPath="file:content">
      <metadata name="File:FileSize" xpath="dc:description"/>
      <metadata name="PDF:Language" xpath="dc:title"/>
      <metadata name="PDF:Producer" xpath="dc:source"/>
    </metadataMapping>
  </extension>

  <extension target="org.nuxeo.binary.metadata.api.service"
             point="metadataRules">
    <rule id="default" order="0" enabled="true" async="false">
      <metadataMappings>
        <metadataMapping-id>File</metadataMapping-id>
        <!-- check not failing on false contribution and logging it -->
        <metadataMapping-id>hello</metadataMapping-id>
      </metadataMappings>
      <filters>
        <filter-id>hasFileType</filter-id>
      </filters>
    </rule>
    <!-- check if can be disabled -->
    <rule id="disable" order="1" enabled="false" async="false">
      <metadataMappings>
        <metadataMapping-id>File</metadataMapping-id>
      </metadataMappings>
      <filters>
        <filter-id>hasNoFileType</filter-id>
      </filters>
    </rule>
  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
             point="filters">
    <filter id="hasFileType">
      <rule grant="true">
        <type>File</type>
      </rule>
    </filter>
    <filter id="hasNoFileType">
      <rule grant="false">
        <type>File</type>
      </rule>
    </filter>
  </extension>

</component>