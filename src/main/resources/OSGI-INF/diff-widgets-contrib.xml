<?xml version="1.0"?>
<component name="org.nuxeo.ecm.diff.widgets.contrib">

  <extension target="org.nuxeo.ecm.platform.forms.layout.LayoutStore"
    point="widgets">

    <!-- Generic widgets: name = diff property type, see: org.nuxeo.ecm.diff.model.PropertyType -->
    <widget name="string" type="text">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <!-- TODO: display true/false? -->
    <widget name="boolean" type="checkbox">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <widget name="date" type="datetime">
      <categories>
        <category>diff</category>
      </categories>
      <properties widgetMode="any">
        <property name="pattern">#{nxu:basicDateAndTimeFormater()}
        </property>
      </properties>
    </widget>

    <widget name="integer" type="int">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <widget name="long" type="int">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <widget name="double" type="double">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <widget name="content" type="file">
      <categories>
        <category>diff</category>
      </categories>
    </widget>

    <widget name="complex" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <properties mode="any">
        <property name="display">inline</property>
        <property name="template">
          /widgets/complex_diff_widget_template.xhtml
        </property>
      </properties>
    </widget>

    <widget name="scalarList" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <properties mode="any">
        <property name="display">inline</property>
        <property name="displayAllItems">false</property>
        <property name="displayItemIndexes">true</property>
        <property name="template">
          /widgets/list_diff_widget_template.xhtml
        </property>
      </properties>
    </widget>

    <widget name="contentList" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <properties mode="any">
        <property name="display">inline</property>
        <property name="displayAllItems">false</property>
        <property name="displayItemIndexes">true</property>
        <property name="template">
          /widgets/list_diff_widget_template.xhtml
        </property>
      </properties>
    </widget>

    <widget name="complexList" type="list">
      <categories>
        <category>diff</category>
      </categories>
      <properties mode="any">
        <property name="display">inline</property>
        <property name="displayAllItems">false</property>
        <property name="displayItemIndexes">true</property>
        <property name="template">
          /widgets/list_diff_widget_template.xhtml
        </property>
      </properties>
    </widget>

    <!-- Specific widgets: name = property xpath -->
    <widget name="system:path" type="text">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.system.path</label>
      </labels>
      <translated>true</translated>
    </widget>

    <widget name="system:type" type="text">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.system.type</label>
      </labels>
      <translated>true</translated>
    </widget>

    <widget name="system:lifecycle-state" type="text">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.system.lifecycleState</label>
      </labels>
      <translated>true</translated>
    </widget>

    <widget name="note:note" type="richtext_with_mimetype">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.note.note</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>note:note</field>
        <field>note:mime_type</field>
      </fields>
      <properties mode="view">
        <property name="translatedHtml">
          #{noteActions.translateImageLinks(field_0)}
        </property>
        <property name="cssClass">note_content_block</property>
      </properties>
    </widget>

    <widget name="file:content" type="file">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.summary.download.file</label>
      </labels>
      <translated>true</translated>
    </widget>

    <widget name="files:files" type="list">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.summary.download.attachments</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="display">inline</property>
        <property name="displayAllItems">false</property>
        <property name="displayItemIndexes">true</property>
        <property name="template">
          /widgets/list_diff_widget_template.xhtml
        </property>
      </properties>
    </widget>

    <widget name="dublincore:nature" type="selectOneDirectory">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.dublincore.nature</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="directoryName">nature</property>
        <property name="localize">true</property>
        <property name="ordering">ordering,label</property>
      </properties>
    </widget>

    <widget name="dublincore:subjects/item" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.dublincore.subjects.item</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="template">/widgets/subjects_item_widget.xhtml
        </property>
      </properties>
    </widget>

    <widget name="dublincore:coverage" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.dublincore.coverage</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="template">/widgets/coverage_widget.xhtml
        </property>
      </properties>
    </widget>

    <widget name="dublincore:contributors/item" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.dublincore.contributors.item</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="template">/widgets/contributors_item_widget.xhtml
        </property>
      </properties>
    </widget>

    <widget name="dublincore:lastContributor" type="template">
      <categories>
        <category>diff</category>
      </categories>
      <labels>
        <label mode="any">label.dublincore.lastContributor</label>
      </labels>
      <translated>true</translated>
      <properties mode="any">
        <property name="template">
          /widgets/single_user_widget_template.xhtml
        </property>
      </properties>
    </widget>

  </extension>

</component>
