<f:subview xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  
  <table class="complexDiffTable">
    <thead>
      <tr>
        <ui:repeat value="#{complexListPropertyDiff.getDiff(0).complexItemNames}" var="complexItemName">
          <th>
            <h:outputText value="#{complexItemName}"/>
          </th>
        </ui:repeat>
      </tr>
    </thead>
    <tbody>
      <ui:repeat value="#{complexListPropertyDiff.diffList}" var="listItem">
        <tr>
          <ui:repeat value="#{listItem.complexItemValues}" var="complexItemValue">
            <td>
              <f:subview rendered="#{complexItemValue.propertyType.name() == 'simple'}">
                <ui:include src="/incl/diff/simple_property_diff_#{side}_value.xhtml">
                  <ui:param name="simplePropertyDiff" value="#{complexItemValue}"/>
                </ui:include>
              </f:subview>
              <f:subview rendered="#{complexItemValue.propertyType.name() == 'complex'}">
                <ui:include src="/incl/diff/complex_property_diff.xhtml">
                  <ui:param name="complexPropertyDiff" value="#{complexItemValue}"/>
                  <ui:param name="side" value="#{side}"/>
                </ui:include>
              </f:subview>
              <f:subview rendered="#{complexItemValue.propertyType.name() == 'list'}">
                /!\ A list type nested in a complex list type is not taken into account yet.
              </f:subview>
            </td>
          </ui:repeat>
        </tr>
      </ui:repeat>
    </tbody>
  </table>

</f:subview>
