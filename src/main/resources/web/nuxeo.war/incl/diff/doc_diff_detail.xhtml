<div xmlns:c="http://java.sun.com/jstl/core"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">

<c:if test="false">
  Field detailed diff modal panel.
  Parameters:
  - modalPanelIdPrefix: the prefix for the modal panel id
  - fieldName: the name of the field.
  - detailedDiffValue: the detailed diff value.
</c:if>

<c:if test="#{true}">
  <rich:modalPanel id="#{modalPanelIdPrefix}_#{fieldName}" autosized="true"
    onmaskclick="Richfaces.hideModalPanel('#{modalPanelIdPrefix}_#{fieldName}')"
    styleClass="detailedDiffPanel"
    minWidth="400">

    <f:facet name="header">
      <h:outputText value="#{messages['diff.detailedDiff.panel.title']}" />
    </f:facet>

    <f:facet name="controls">
      <h:panelGroup>
        <h:graphicImage value="/icons/action_delete_mini_over.png"
          id="hideDetailedDiffPanel_#{fieldName}" />
        <rich:componentControl for="#{modalPanelIdPrefix}_#{fieldName}"
          attachTo="hideDetailedDiffPanel_#{fieldName}" operation="hide" event="onclick" />
      </h:panelGroup>
    </f:facet>

    <table class="dataInput">
      <tbody>
        <tr>
          <td class="labelColumn">
            <h:outputText value="#{messages[nxu:concat('label.', fn:replace(fieldName, '_', '.'))]}" />
          </td>
          <td class="fieldColumn">
            <h:outputText value="#{detailedDiffValue}" escape="false" />
          </td>
        </tr>
      </tbody>
    </table>
    
  </rich:modalPanel>
</c:if>

</div>