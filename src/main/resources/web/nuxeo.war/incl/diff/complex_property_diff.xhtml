<f:subview xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

  <nxu:set var="complexItemNames" value="#{propertyDiffDisplayHelper.getComplexItemNames(schema, field)}">
    <table class="complexDiffTable">
      <thead>
        <tr>
          <ui:repeat value="#{complexItemNames}" var="complexItemName">
            <th>
              <h:outputText value="#{complexItemName}"/>
            </th>
          </ui:repeat>
        </tr>
      </thead>
      <tboby>
        <tr>
          <ui:repeat value="#{complexItemNames}" var="complexItemName">
            <td>
              <ui:include src="/incl/diff/simple_property_diff.xhtml">
                <ui:param name="propertyValue" value="#{propertyDiffDisplayHelper.getComplexItemValue(doc, schema, field, complexItemName)}"/>
                <ui:param name="propertyDiff" value="#{propertyDiff.diffMap[complexItemName]}"/>
              </ui:include>
            </td>
          </ui:repeat>
        </tr>
      </tboby>
    </table>
  </nxu:set>
</f:subview>
