<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.threed.convert.commandline">

    <require>org.nuxeo.ecm.platform.commandline.executor.service.defaultContrib</require>

    <extension target="org.nuxeo.ecm.platform.commandline.executor.service.CommandLineExecutorComponent"
               point="command">

        <command name="blender_pipeline" enabled="true">
            <commandLine>docker</commandLine>
            <testParameterString>pull tcardoso/blender</testParameterString>
            <parameterString>run --rm -v #{scriptsDir}:/scripts:ro -v #{inDir}:/in:ro -v #{outDir}:/out tcardoso/blender
                -P /scripts/#{scriptFile} -- --input /in/#{inFile} --outdir /out --operators #{operators}
                --renderids #{renderIds} -li #{lodIds}  -pp #{percPoly} -mp #{maxPoly} -d #{dimensions} -c #{coords}
            </parameterString>
            <installationDirective>Please, install docker (https://www.docker.com/)
            </installationDirective>
        </command>
        <command name="collada2gltlf" enabled="true">
            <commandLine>docker</commandLine>
            <testParameterString>pull tcardoso/collada2gltf</testParameterString>
            <parameterString>run --rm -v #{inDir}:/in:ro -v #{outDir}:/out tcardoso/collada2gltf
                -f /in/#{inFile} -o /out/#{outFile} -e
            </parameterString>
            <installationDirective>Please, install docker (https://www.docker.com/)
            </installationDirective>
        </command>
    </extension>

</component>