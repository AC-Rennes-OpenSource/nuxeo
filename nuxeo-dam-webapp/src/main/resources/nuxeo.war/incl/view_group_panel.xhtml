<div xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:nxl="http://nuxeo.org/nxforms/layout">

  <a4j:region>
  <a4j:outputPanel id="viewGroupPanel">
  <a4j:form id="viewGroup" ajaxSingle="true">

    <div id="facesStatusMessage" class="facesStatusMessage">
      <h:messages globalOnly="true"
        infoClass="infoFeedback"
        warnClass="warningFeedback"
        errorClass="errorFeedback"/>
    </div>

    <f:subview id="viewSubView" rendered="#{groupManagerActions.displayMode == 'view'}">
      <nxl:layout name="group" mode="view" value="#{groupManagerActions.selectedGroup}" />
    </f:subview>
    <f:subview id="editSubView" rendered="#{groupManagerActions.displayMode == 'edit'}">
      <nxl:layout name="group" mode="edit" value="#{groupManagerActions.selectedGroup}" />
    </f:subview>

    <p class="buttonsGadget">
      <a4j:commandLink styleClass="button"
                       action="#{groupManagerActions.updateGroupNoRedirect}"
                       rendered="#{groupManagerActions.displayMode == 'edit'}"
                       reRender="viewGroupPanel"
                       oncomplete="if (!data) { Richfaces.hideModalPanel('createGroupFormPanel') };">
        <h:outputText value="#{messages['command.save']}"/>
      </a4j:commandLink>
      <a4j:commandLink styleClass="button"
                       action="#{groupManagerActions.toggleDisplayMode}"
                       immediate="true" reRender="viewGroupPanel">
        <h:outputText value="#{messages['command.group.cancel']}"
                      rendered="#{groupManagerActions.displayMode == 'edit'}"/>
        <h:outputText value="#{messages['command.group.edit']}"
                      rendered="#{groupManagerActions.displayMode == 'view'}"/>
      </a4j:commandLink>
    </p>
  </a4j:form>
  </a4j:outputPanel>
  </a4j:region>
</div>
