<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.dam.theme">

  <require>org.nuxeo.theme.jsf</require>
  <require>org.nuxeo.theme.fragments</require>

  <!--  themes -->
  <extension target="org.nuxeo.theme.services.ThemeService"
    point="themes">

    <theme>
      <src>themes/theme-dam.xml</src>
    </theme>

  </extension>


  <!-- views -->
  <extension target="org.nuxeo.theme.services.ThemeService"
    point="views">

    <view name="dam logo" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/logo.xhtml</template>
    </view>

    <view name="dam banner" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/banner.xhtml</template>
      <resource>modal-popup.css</resource>
      <resource>importSetForm.js</resource>
    </view>

    <view name="dam search filters" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/search_filter.xhtml</template>
    </view>

    <view name="dam filtered search results" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/filtered_search_results.xhtml</template>
      <resource>dam.css</resource>
    </view>

    <view name="dam selection view" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/selection_view.xhtml</template>
      <resource>dam.css</resource>
      <resource>video-controller.js</resource>
    </view>

    <view name="dam includes" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/includes.xhtml</template>

      <resource>jquery.js</resource>
      <resource>toggle-panel.js</resource>
      <resource>utils.js</resource>
    </view>

    <view name="dam footer" template-engine="jsf-facelets">
      <format-type>widget</format-type>
      <template>incl/footer.xhtml</template>
    </view>

  </extension>


  <!-- resources -->
  <extension target="org.nuxeo.theme.services.ThemeService"
    point="resources">

    <resource name="video-controller.js">
      <path>jsvideo/video-controller.js</path>
    </resource>

    <resource name="jquery.js">
      <path>scripts/jquery.js</path>
    </resource>

    <resource name="toggle-panel.js">
      <path>scripts/toggle-panel.js</path>
    </resource>

    <resource name="seam-remote.js">
      <path>nxthemes/html/scripts/seam-remote.js</path>
    </resource>

    <!-- calendar resources -->
    <resource name="calendar.js">
      <path>jscalendar/js/jscal2.js</path>
    </resource>
    <resource name="calendar-en.js">
      <path>jscalendar/js/lang/en.js</path>
    </resource>
    <resource name="calendar-ca.js">
      <path>jscalendar/js/lang/ca.js</path>
    </resource>
    <resource name="calendar-cn.js">
      <path>jscalendar/js/lang/cn.js</path>
    </resource>
    <resource name="calendar-cz.js">
      <path>jscalendar/js/lang/cz.js</path>
    </resource>
    <resource name="calendar-es.js">
      <path>jscalendar/js/lang/es.js</path>
    </resource>
    <resource name="calendar-fr.js">
      <path>jscalendar/js/lang/fr.js</path>
    </resource>
    <resource name="calendar-it.js">
      <path>jscalendar/js/lang/it.js</path>
    </resource>
    <resource name="calendar-jp.js">
      <path>jscalendar/js/lang/jp.js</path>
    </resource>
    <resource name="calendar-nl.js">
      <path>jscalendar/js/lang/nl.js</path>
    </resource>
    <resource name="calendar-pl.js">
      <path>jscalendar/js/lang/pl.js</path>
    </resource>
    <resource name="calendar-pt.js">
      <path>jscalendar/js/lang/pt.js</path>
    </resource>
    <resource name="calendar-ro.js">
      <path>jscalendar/js/lang/ro.js</path>
    </resource>
    <resource name="calendar-ru.js">
      <path>jscalendar/js/lang/ru.js</path>
    </resource>
    <resource name="calendar-sv.js">
      <path>jscalendar/js/lang/sv.js</path>
    </resource>
    <resource name="calendar.css">
      <path>jscalendar/css/jscal2.css</path>
      <context-path>${org.nuxeo.ecm.contextPath}/jscalendar/css/</context-path>
    </resource>
    <resource name="calendar-border-radius.css">
      <path>jscalendar/css/border-radius.css</path>
    </resource>
    <resource name="calendar-galaxy.css">
      <path>jscalendar/css/galaxy/galaxy.css</path>
    </resource>

    <resource name="modal-popup.css">
      <path>css/modal_popup.css</path>
    </resource>
    <resource name="dam.css">
      <path>css/dam.css</path>
    </resource>

    <resource name="importSetForm.js">
      <path>scripts/importSetForm.js</path>
    </resource>

    <resource name="utils.js">
      <path>scripts/utils.js</path>
    </resource>

  </extension>


  <!-- application settings -->
  <extension target="org.nuxeo.theme.services.ThemeService"
    point="applications">

    <application root="/nuxeo" template-engine="jsf-facelets">

      <negotiation>
        <strategy>dam</strategy>
        <default-engine>default</default-engine>
        <default-theme>dam/default</default-theme>
        <default-perspective>default</default-perspective>
      </negotiation>

      <!-- Cache control for theme resources (/nxthemes-lib/) -->
      <resource-caching>
        <lifetime>36000</lifetime>
      </resource-caching>

      <!-- Cache control for theme styles (/nxthemes-css/) -->
      <style-caching>
        <lifetime>900</lifetime>
      </style-caching>

      <view id="/assets.xhtml">
        <theme>dam/default</theme>
      </view>

      <view id="/annotations_popup.xhtml">
        <theme>dam/popup</theme>
      </view>

      <view id="/administration.xhtml">
        <theme>dam/settings</theme>
      </view>

    </application>
  </extension>


  <!-- negotiation strategy for dam -->
  <extension target="org.nuxeo.theme.services.ThemeService"
    point="negotiations">

    <negotiation object="engine" strategy="dam">
      <scheme>org.nuxeo.theme.jsf.negotiation.engine.RequestParameter</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.engine.CookieValue</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.engine.ViewId</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.engine.DefaultEngine</scheme>
    </negotiation>

    <negotiation object="mode" strategy="dam">
      <scheme>org.nuxeo.theme.jsf.negotiation.mode.CookieValue</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.mode.UnspecifiedMode</scheme>
    </negotiation>

    <negotiation object="theme" strategy="dam">
      <scheme>org.nuxeo.theme.jsf.negotiation.theme.RequestParameter</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.theme.CookieValue</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.theme.ViewId</scheme>
      <scheme>org.nuxeo.ecm.webapp.theme.negotiation.LocalTheme</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.theme.DefaultTheme</scheme>
    </negotiation>

    <negotiation object="perspective" strategy="dam">
      <scheme>
        org.nuxeo.theme.jsf.negotiation.perspective.RequestParameter
      </scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.perspective.CookieValue</scheme>
      <scheme>org.nuxeo.theme.jsf.negotiation.perspective.ViewId</scheme>
      <scheme>org.nuxeo.ecm.webapp.theme.negotiation.LocalPerspective</scheme>
      <scheme>
        org.nuxeo.theme.jsf.negotiation.perspective.DefaultPerspective
      </scheme>
    </negotiation>
  </extension>

    <!-- Styles presets -->

  <extension target="org.nuxeo.theme.services.ThemeService" point="presets">

    <palette name="DAM borders"
      src="themes/palettes/dam-borders.properties" category="border" />
    <palette name="DAM backgrounds"
      src="themes/palettes/dam-backgrounds.properties" category="background" />
    <palette name="DAM fonts" src="themes/palettes/dam-fonts.properties"
      category="font" />
    <palette name="DAM colors" src="themes/palettes/dam-colors.properties"
      category="color" />

  </extension>


</component>
