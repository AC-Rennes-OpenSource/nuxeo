<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.dam.querymodels">

  <require>org.nuxeo.ecm.core.search.api.client.querymodel.QueryModelService</require>

  <extension
    target="org.nuxeo.ecm.core.search.api.client.querymodel.QueryModelService"
    point="model">

    <queryModel name="FILTERED_DOCUMENTS" docType="FilterQuery">
      <max>20</max>

      <whereClause>

        <predicate parameter="ecm:fulltext" operator="LIKE">
          <field schema="filter_query" name="ecm_fulltext" />
        </predicate>

        <predicate parameter="ecm:primaryType" operator="IN">
          <field schema="filter_query" name="ecm_primaryType" />
        </predicate>

        <predicate parameter="dc:coverage" operator="STARTSWITH">
          <field schema="filter_query" name="dc_coverage" />
        </predicate>

        <fixedPart>
          ecm:isProxy = 0 AND ecm:mixinType != 'HiddenInNavigation' AND ecm:mixinType != 'Folderish'
        </fixedPart>

      </whereClause>

      <sortColumn>
        <field schema="filter_query" name="sortColumn" />
      </sortColumn>

      <sortAscending>
        <field schema="filter_query" name="sortAscending" />
      </sortAscending>
    </queryModel>

  </extension>

</component>
