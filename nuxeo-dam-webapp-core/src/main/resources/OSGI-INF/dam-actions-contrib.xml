<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.dam.actions">

  <require>org.nuxeo.connect.client.actions</require>
  <require>org.nuxeo.ecm.user.center.actions</require>
  <require>org.nuxeo.ecm.platform.userworkspace.actions</require>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="actions">

    <action id="dam" link="assets" label="label.main.tab.dam" order="50">
      <category>MAIN_TABS</category>
    </action>

    <action id="non_anonymous_logout" link="logout" label="command.logout" order="100">
      <category>USER_MENU_ACTIONS</category>
      <filter-id>not_anonymous</filter-id>
    </action>

    <!-- TABS -->
    <action id="TAB_ASSET_VIEW" link="/incl/tabs/asset_view.xhtml" order="10"
      label="action.asset.view" icon="/icons/file.gif">
      <category>VIEW_ASSET_ACTION_LIST</category>
    </action>

    <action id="TAB_IP_RIGHTS" link="/incl/tabs/ip_rights.xhtml" order="20"
      label="action.ip.rights" icon="/icons/file.gif">
      <category>VIEW_ASSET_ACTION_LIST</category>
    </action>

    <action id="TAB_DELIVERY" link="/incl/tabs/delivery.xhtml" order="30"
      label="action.delivery" icon="/icons/file.gif">
      <category>VIEW_ASSET_ACTION_LIST</category>
    </action>

    <action id="TAB_HISTORY" link="/incl/tabs/asset_history.xhtml" order="40"
      label="action.asset.history" icon="/icons/file.gif">
      <category>VIEW_ASSET_ACTION_LIST</category>
    </action>


    <!-- ADMIN TABS -->
    <action id="ADMIN_FOLDERS" link="/incl/admin/folders.xhtml" order="60"
      label="action.admin.folders">
      <category>ADMIN_ACTION_LIST</category>
    </action>


    <!-- BUTTONS -->
    <action id="CURRENT_SELECTION_EDIT" link="javascript:Richfaces.showModalPanel('bulkEditPanel');"
      label="command.bulk.edit" icon="" help="command.bulk.edit.help">
      <category>DAM_CURRENT_SELECTION_LIST_HREF</category>
      <filter id="canBulkEdit">
        <rule grant="true">
          <condition>#{bulkSelectActions.isSelectionNotEmpty}</condition>
        </rule>
      </filter>
    </action>

    <action id="CURRENT_SELECTION_DELETE" link="#{bulkSelectActions.deleteSelection}"
      label="command.delete" icon="" help="command.delete.help"
      confirm="if( !confirmDeleteAssets() ) return false;">
      <category>DAM_CURRENT_SELECTION_LIST</category>
      <filter id="canDelete">
        <rule grant="true">
          <condition>#{bulkSelectActions.canDelete}</condition>
        </rule>
      </filter>
    </action>

    <action id="CURRENT_SELECTION_EXPORT" link="#{bulkSelectActions.exportSelection}"
      label="command.export" icon="" help="command.export.help"
      confirm="if( !confirmExportAssets() ) return false;">
      <category>DAM_CURRENT_SELECTION_NOA4J_LIST</category>
      <filter id="canExport">
        <rule grant="true">
          <condition>#{bulkSelectActions.isSelectionNotEmpty}</condition>
        </rule>
      </filter>
    </action>

    <!-- Admin Center -->
    <action id="ThemesManager" enabled="false" />

    <action id="ADMIN_FOLDERS" link="/incl/admin/folders.xhtml" order="30"
      label="action.admin.folders">
      <category>NUXEO_ADMIN</category>
      <filter-id>only_for_manager</filter-id>
    </action>

    <!-- Home -->
    <action id="home" enabled="false" />

    <!-- User Workspace -->
    <action id="SHOW_REPOSITORY" enabled="false" />
    <action id="SHOW_PERSONAL_WORKSPACE" enabled="false" />

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="filters">

    <filter id="not_anonymous">
      <rule grant="false">
        <condition>#{currentUser.anonymous}</condition>
      </rule>
    </filter>
    <filter id="only_for_manager">
      <rule grant="true">
        <condition>#{userSession.administrator}</condition>
      </rule>
    </filter>

    <filter id="user_manager">
    </filter>

  </extension>

</component>
