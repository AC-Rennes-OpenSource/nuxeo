<c:if test="true"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax">

  <script type="text/javascript">
    <h:outputText  value="var routeDocId='#{value.document.id}';" />
    <h:outputText value="var currentLang='#{restHelper.getLocaleString()}';"/>
    <h:outputText value="var divContainerTargetId='#{widget.id}_target';"/>
    function showGraph() {
      loadGraph(routeDocId, currentLang, divContainerTargetId);
      openFancyBox('##{widget.id}_graphView_box', {
        'autoScale': true,
        'autoDimensions': false,
        'type': 'inline',
        'width': '90%',
        'height': '90%',
        'transitionIn': 'none',
        'transitionOut': 'none',
        'enableEscapeButton': true,
        'centerOnScroll': true
      });
      return false;
    }
  </script>

  <a href="#" onclick="showGraph();return false;" class="button smallButton">
    #{messages['label.document.routing.show.graph']}
  </a>

  <div style="display:none">
    <div id="#{widget.id}_graphView_box">
      <!-- div container for the graph -->
      <div id="#{widget.id}_target" class="targetDiv"></div>
    </div>
  </div>

</c:if>
