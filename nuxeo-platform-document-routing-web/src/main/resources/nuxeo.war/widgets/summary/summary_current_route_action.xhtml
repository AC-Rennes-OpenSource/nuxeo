<div class="lcAndVersion" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxdir="http://nuxeo.org/nxdirectory" xmlns:nxl="http://nuxeo.org/nxforms/layout">

  <c:set var="lifeCycleState" value="#{currentDocument.getCurrentLifeCycleState()}" />
  <c:choose>
    <c:when test="#{lifeCycleState eq 'draft'}">
      <h:commandButton type="submit" class="button"
        value="#{messages['action.validate.document.routing.model']}"
        action="#{routingActions.validateRouteModel()}" />
    </c:when>
    <c:when test="#{lifeCycleState eq 'validated'}">
      <nxl:layout mode="edit" value="#{changeableDocument}"
        name="document_routing_instance" />
      <h:commandButton type="submit" class="button"
        value="#{messages['action.start.document.routing']}" action="#{routingActions.startRoute()}" />
    </c:when>
    <c:otherwise>
      <nxl:layout mode="view" value="#{changeableDocument}"
        name="document_routing_instance" />
    </c:otherwise>
  </c:choose>

</div>