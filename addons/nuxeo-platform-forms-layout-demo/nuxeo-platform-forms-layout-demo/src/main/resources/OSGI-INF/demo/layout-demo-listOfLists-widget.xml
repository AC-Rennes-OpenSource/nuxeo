<?xml version="1.0"?>

<component name="org.nuxeo.ecm.platform.forms.layoutDemo.listOfListsWidget.contrib">

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="listOfListsWidgetLayout">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>listOfListsWidget</widget>
        </row>
      </rows>
      <widget name="listOfListsWidget" type="list">
        <labels>
          <label mode="any">List of lists</label>
        </labels>
        <translated>false</translated>
        <fields>
          <field>lds:listOfLists</field>
        </fields>
        <properties widgetMode="edit">
          <property name="diff">true</property>
        </properties>
        <subWidgets>
          <widget name="listOfListsItem" type="complex">
            <labels>
              <label mode="any">List of lists item</label>
            </labels>
            <!-- since 5.6, using a widget of type 'complex' is enough -->
            <!--
              <properties mode="any">
              <property name="template">
              /widgets/complex_list_item_widget_template.xhtml
              </property>
              </properties>
            -->
            <!-- subwidgets for complex -->
            <subWidgets>
              <widget name="stringItem" type="text">
                <fields>
                  <field>stringItem</field>
                </fields>
                <labels>
                  <label mode="any">String item</label>
                </labels>
              </widget>
              <widget name="stringArrayItem" type="selectManyDirectory">
                <fields>
                  <field>stringArrayItem</field>
                </fields>
                <labels>
                  <label mode="any">String array item</label>
                </labels>
                <properties mode="any">
                  <property name="directoryName">layout_demo_crew</property>
                </properties>
                <properties widgetMode="edit">
                  <property name="required">true</property>
                  <property name="styleClass">dataInputText</property>
                </properties>
              </widget>
              <widget name="stringListItem" type="template">
                <fields>
                  <field>stringListItem</field>
                </fields>
                <labels>
                  <label mode="any">String list item</label>
                </labels>
                <properties mode="any">
                  <property name="template">
                    /widgets/list_subwidget_template.xhtml
                  </property>
                </properties>
                <subWidgets>
                  <widget name="stringListSubItem" type="text">
                    <labels>
                      <label mode="any"></label>
                    </labels>
                    <fields>
                      <field>#{value}</field>
                      <!-- equivalent field definition alternative:
                        <field></field>
                      -->
                    </fields>
                  </widget>
                </subWidgets>
              </widget>
            </subWidgets>
          </widget>
        </subWidgets>
      </widget>
    </layout>

  </extension>

</component>
