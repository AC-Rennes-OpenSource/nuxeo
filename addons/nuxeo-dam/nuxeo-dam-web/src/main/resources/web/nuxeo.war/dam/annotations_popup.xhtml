<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<nxthemes:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:nxthemes="http://nuxeo.org/nxthemes"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
   class="dataOutput">

  <ui:define name="page title">
    <h:outputText value="Annotations" />
  </ui:define>

  <ui:define name="body">

    <h:form id="document_view">

      <script type="text/javascript">
        var annotationConfiguration = {
          annoteaServerUrl : "#{baseURL}Annotations",
          annotationCssUrl : "#{contextPath}/org.nuxeo.ecm.platform.annotations.gwt.AnnotationPanel/annotation-style.css",
          previewUrl: "#{previewActions.previewWithBlobPostProcessingURL}",
          documentUrl: "#{nxd:documentUrl(currentDocument)}"
        };

        var serverSettings = {
          repositoryName : "#{currentDocument.repositoryName}",
          documentId : "#{currentDocument.id}"
        };

        jQuery(document).ready(function() {
          // we know we are in a fancybox
          jQuery('#display').height(jQuery('#fancybox-content', window.parent.document).height() - 10);
        });
      </script>

      <script type="text/javascript"
        src='#{contextPath}/org.nuxeo.ecm.platform.annotations.gwt.AnnotationModule/org.nuxeo.ecm.platform.annotations.gwt.AnnotationModule.nocache.js'></script>

      <iframe src="javascript:''" id="__gwt_historyFrame"
        style="width: 0; height: 0; border: 0"></iframe>

      <div id="display">
      </div>

    </h:form>

  </ui:define>

</nxthemes:composition>
