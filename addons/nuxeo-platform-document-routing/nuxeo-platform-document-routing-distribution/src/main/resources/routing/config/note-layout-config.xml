<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.routing.test.note.summary.layout">
  <require>org.nuxeo.ecm.platform.forms.layouts.webapp.summary</require>
  <require>org.nuxeo.ecm.core.CoreExtensions</require>
  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <!-- a test contribution to check the summary layout of routing -->
    <layout name="note_summary_layout">
      <templates>
        <template mode="any">/layouts/layout_summary_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>summary_current_document_description</widget>
          <widget>note_text</widget>
          <widget>summary_current_document_dublincore</widget>
          <widget>summary_current_document_comments</widget>
        </row>
        <row>
          <widget>summary_current_document_lc_and_version</widget>
          <widget>summary_document_route_action</widget>
          <widget>summary_current_document_actions</widget>
          <widget>summary_current_document_files</widget>
          <widget>summary_current_document_tagging</widget>
          <widget>summary_current_document_relations</widget>
        </row>
        <row>
          <widget>summary_current_document_publications</widget>
        </row>
        <row>
          <widget>summary_current_document_single_tasks</widget>
        </row>
      </rows>
      <widget name="note_text" type="richtext_with_mimetype">
        <fields>
          <field>note:note</field>
          <field>note:mime_type</field>
        </fields>
        <properties mode="view">
          <property name="translatedHtml">
            #{noteActions.translateImageLinks(field_0)}
          </property>
          <property name="cssClass">note_content_block</property>
        </properties>
      </widget>
    </layout>
  </extension>

  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="doctype">
    <doctype name="Note" extends="Document">
      <schema name="common" />
      <schema name="note" />
      <schema name="uid" />
      <schema name="files" />
      <schema name="dublincore" />
      <facet name="Routable" />
      <facet name="Versionable" />
      <facet name="Publishable" />
      <facet name="Commentable" />
    </doctype>
  </extension>
</component>
