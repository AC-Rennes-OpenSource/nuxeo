<div xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  id="#{widget.id}">

<c:if test="#{widget.mode == 'create' or widget.mode == 'edit'}">

  <table>
  <tr>
    <td>
      <input type="checkbox" id="unlimitedChk" onchange="changeUnlimited(this)" /> #{messages['label.quota.unlimited']}
    </td>
  </tr><tr>
  <td>
    <table id="sliderTable">
    <tr>
    <td></td><td style="text-align:center;font-weight:bold"><span id="sliderDisplay"></span>
    </td><td></td></tr>
    <tr>
    <td>

    <c:if test="#{field_1 lt 102400}">
      100 #{messages['label.unit.KB']}
    </c:if>

    <c:if test="#{field_1 gt 102400}">
      <nxu:set var="formatedSize" value="#{quotaStatsActions.formatQuota(field_1, field_0)}">
       <h:outputText value="#{formatedSize.valueInUnit}">
         <f:convertNumber maxFractionDigits="2" />
       </h:outputText>
       <h:outputText value=" #{messages[formatedSize.unit]}"/>
      </nxu:set>
    </c:if>

    </td><td>
    <rich:inputNumberSlider id="slider" width="450px"
            showBoundaryValues="false"
            onchange="displayQuotaSize(this.value);"
            onslide="displayQuotaSize(this.value);"
            showToolTip="false"
            showInput="true"
            maxValue="27.701"
            minValue="#{quotaStatsActions.getMinQuotaSliderValue(field_1)}" step="0.001"></rich:inputNumberSlider>
    </td>
    <td>
    999 #{messages['label.unit.MB']}
    <h:inputText id="maxValue" value="#{field}" style="visibility:hidden"/>
    </td>
    </tr>
    </table>
</td></tr>
</table>

</c:if>

<c:if test="#{widget.mode != 'create' and widget.mode != 'edit'}">

  <nxu:set var="formatedSize" value="#{quotaStatsActions.formatQuota(field, 0)}">
    <h:outputText value="#{formatedSize.valueInUnit}">
      <f:convertNumber maxFractionDigits="2" />
    </h:outputText>
    <h:outputText value=" #{messages[formatedSize.unit]}"/>
  </nxu:set>


</c:if>
</div>
